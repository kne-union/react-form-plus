{"version":3,"file":"static/js/830.5c50bb40.chunk.js","mappings":"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","sources":["../../src/FieldList.js","../../src/FormInfo.js","../../src/SubList.js","../../src/MultiField.js","../../src/TableList.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport { useFormContext } from '@kne/react-form';\n\nconst FieldList = props => {\n  const { list, groupArgs, ignoreFieldProps, itemRender } = Object.assign({}, { ignoreFieldProps: [] }, props);\n  const context = useFormContext();\n  const contextApi = Object.assign({}, context, groupArgs ? { groupArgs } : {});\n  return (\n    <>\n      {list\n        .filter(item => {\n          if (typeof item.props.display === 'function') {\n            return item.props.display(contextApi);\n          }\n          return item.props.display !== false;\n        })\n        .map((item, index) => {\n          const key = item.props.name + index || (groupArgs && groupArgs[0] + index) || index;\n          const targetProps = { key, list, props: item.props },\n            componentProps = Object.assign({}, item.props),\n            ComponentItem = item.type;\n          ['display', 'block', 'hidden', 'setExtraProps', 'isBlock', ...ignoreFieldProps].forEach(key => {\n            if (item.props.hasOwnProperty(key)) {\n              targetProps[key] = item.props[key];\n            }\n            delete componentProps[key];\n          });\n\n          if (targetProps.hasOwnProperty('isBlock')) {\n            componentProps['block'] = targetProps.isBlock;\n          }\n          const innerComponent = (\n            <ComponentItem\n              {...Object.assign(\n                {},\n                componentProps,\n                typeof targetProps.setExtraProps === 'function'\n                  ? targetProps.setExtraProps({\n                      props: componentProps,\n                      contextApi\n                    })\n                  : {}\n              )}\n              onChange={(...args) => {\n                return item.props.onChange && item.props.onChange(...args, contextApi);\n              }}\n            />\n          );\n\n          return <Fragment key={key}>{itemRender(innerComponent, targetProps)}</Fragment>;\n        })}\n    </>\n  );\n};\n\nexport default FieldList;\n","import React from 'react';\nimport FieldList from './FieldList';\n\nconst FormInfo = props => {\n  const { list, groupArgs, column, itemRender, children, ...others } = Object.assign({}, { column: 2 }, props);\n  return children(\n    <FieldList\n      list={list}\n      itemRender={(children, targetProps) =>\n        itemRender(\n          children,\n          Object.assign({}, targetProps, {\n            span: targetProps.block === true ? 24 : Math.round(24 / (column || 1))\n          })\n        )\n      }\n    />,\n    others\n  );\n};\n\nexport default FormInfo;\n","import React, { useRef } from 'react';\nimport { GroupList, useFormContext } from '@kne/react-form';\nimport get from 'lodash/get';\n\nconst SubList = props => {\n  const { itemTitle, name, column, list, listRender, maxLength, minLength, reverseOrder, beforeAdd, afterDelete, defaultLength, empty, children, ...others } = Object.assign(\n    {},\n    {\n      minLength: 0,\n      column: 2,\n      reverseOrder: false,\n      defaultLength: 1\n    },\n    props\n  );\n\n  const groupRef = useRef(null);\n  const context = useFormContext();\n  const { formData } = context;\n  const allowAdd = !(maxLength && maxLength <= get(formData, `${name}.length`, 0));\n  return children(\n    <GroupList name={name} defaultLength={defaultLength} ref={groupRef} empty={empty} reverseOrder={reverseOrder}>\n      {(...groupArgs) => {\n        //这里兼容一下新老版本\n        const {\n          id: key,\n          index,\n          onRemove,\n          length\n        } = (groupArgs => {\n          if (typeof groupArgs[0] === 'object') {\n            return groupArgs[0];\n          }\n          const [key, { index, onRemove, length }] = groupArgs;\n          return { id: key, index, onRemove, length };\n        })(groupArgs);\n\n        return listRender({\n          ...others,\n          id: key,\n          column,\n          list: typeof list === 'function' ? list(...groupArgs, context) : list,\n          title:\n            typeof itemTitle === 'function'\n              ? itemTitle({\n                  index,\n                  id: key,\n                  onRemove\n                })\n              : itemTitle,\n          groupArgs,\n          allowRemove: !(minLength && minLength >= length),\n          onRemove: () => {\n            onRemove(key);\n            afterDelete && afterDelete(...groupArgs, context);\n          }\n        });\n      }}\n    </GroupList>,\n    {\n      allowAdd,\n      reverseOrder,\n      onAdd: options => {\n        if (\n          typeof beforeAdd === 'function'\n            ? beforeAdd(name, context, {\n                reverseOrder,\n                group: groupRef.current\n              }) !== false\n            : true\n        ) {\n          groupRef.current.onAdd(Object.assign({}, { isUnshift: true }, options));\n        }\n      }\n    }\n  );\n};\n\nexport default SubList;\n","import React, { useRef } from 'react';\nimport { GroupList, useFormContext } from '@kne/react-form';\nimport get from 'lodash/get';\n\nconst MultiField = props => {\n  const { name, label, rule, field, defaultLength, minLength, maxLength, children, itemRender, empty, reverseOrder, ...others } = Object.assign({}, { defaultLength: 1, minLength: 0, reverseOrder: false }, props);\n  const ref = useRef(null);\n  const CurrentFiled = field;\n  const context = useFormContext();\n  const { formData } = context;\n  const allowAdd = !(maxLength && maxLength <= get(formData, `${name}.length`, 0));\n  return children(\n    <GroupList ref={ref} name={name} defaultLength={Math.max(defaultLength, minLength, 1)} empty={empty} reverseOrder={reverseOrder}>\n      {(...groupArgs) => {\n        //这里兼容一下新老版本\n        const { id, index, onRemove, length } = (groupArgs => {\n          if (typeof groupArgs[0] === 'object') {\n            return groupArgs[0];\n          }\n          const [key, { index, onRemove, length }] = groupArgs;\n          return { id: key, index, onRemove, length };\n        })(groupArgs);\n\n        const allowRemove = length > Math.max(minLength, 1);\n        return itemRender(<CurrentFiled {...others} name={name} label={label} rule={rule} />, {\n          id,\n          index,\n          allowRemove,\n          onRemove\n        });\n      }}\n    </GroupList>,\n    {\n      allowAdd,\n      reverseOrder,\n      onAdd: options => {\n        ref.current.onAdd(Object.assign({}, { isUnshift: false }, options));\n      }\n    }\n  );\n};\n\nexport default MultiField;\n","import React, { useState, useRef, forwardRef, useImperativeHandle } from 'react';\nimport SubList from './SubList';\nimport FieldList from './FieldList';\nimport clone from 'lodash/clone';\n\nconst TableHeader = forwardRef((props, ref) => {\n  const { children, headerItemRender } = Object.assign({}, props);\n  const [headers, setHeaders] = useState(new Map());\n  useImperativeHandle(ref, () => {\n    return targetProps => {\n      setTimeout(() => {\n        setHeaders(headers => {\n          if (headers.has(targetProps.key)) {\n            return headers;\n          }\n          const newHeaders = clone(headers);\n          newHeaders.set(targetProps.key, targetProps.props);\n          return newHeaders;\n        });\n      });\n    };\n  }, []);\n  return children(\n    Array.from(headers).map(([id, { label, rule }]) => {\n      return headerItemRender(label, {\n        isReq: (rule || '').split(' ').indexOf('REQ') === 0,\n        id\n      });\n    }),\n    {\n      width: `${100 / headers.size}%`\n    }\n  );\n});\n\nconst TableList = props => {\n  const headerRef = useRef(null);\n  const { list, children, listRender, itemRender, headerRender, headerItemRender, ...others } = Object.assign(\n    {},\n    {\n      children: inner => inner\n    },\n    props\n  );\n  return (\n    <SubList\n      {...others}\n      list={list}\n      listRender={({ list, groupArgs, id, ...props }) => {\n        return listRender(\n          <FieldList\n            list={list}\n            groupArgs={groupArgs}\n            itemRender={(children, targetProps) => {\n              headerRef.current(targetProps);\n              return itemRender(children, targetProps);\n            }}\n          />,\n          {\n            width: `${100 / list.length}%`,\n            ...props\n          }\n        );\n      }}\n    >\n      {(inner, others) => {\n        return children(\n          <>\n            <TableHeader ref={headerRef} headerItemRender={headerItemRender}>\n              {headerRender}\n            </TableHeader>\n            {inner}\n          </>,\n          others\n        );\n      }}\n    </SubList>\n  );\n};\n\nexport default TableList;\n"],"names":["FieldList","props","list","groupArgs","ignoreFieldProps","itemRender","Object","assign","context","useFormContext","contextApi","React","filter","item","display","map","index","key","name","targetProps","componentProps","ComponentItem","type","forEach","hasOwnProperty","isBlock","innerComponent","_extends","setExtraProps","onChange","_len","arguments","length","args","Array","_key","Fragment","FormInfo","_Object$assign","column","children","others","_objectWithoutPropertiesLoose","_excluded$3","span","block","Math","round","SubList","minLength","reverseOrder","defaultLength","itemTitle","listRender","maxLength","beforeAdd","afterDelete","empty","_excluded$2","groupRef","useRef","formData","allowAdd","get","GroupList","ref","_len2","_key2","id","onRemove","title","allowRemove","onAdd","options","group","current","isUnshift","MultiField","label","rule","field","_excluded$1","CurrentFiled","max","_len3","_key3","TableHeader","forwardRef","headerItemRender","headers","setHeaders","useState","Map","useImperativeHandle","setTimeout","has","newHeaders","clone","set","from","_ref2","isReq","split","indexOf","width","size","TableList","headerRef","inner","headerRender","_excluded","_ref","_excluded2"],"sourceRoot":""}